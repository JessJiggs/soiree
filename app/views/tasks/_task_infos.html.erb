<div data-controller="edit-task" data-edit-task-target="task">
  <div class="card-task" data-edit-task-target="infos">
    <h5><%= task.name.capitalize %></h5>
    <p><em><%= task.description %></em></p>
    <p><%= task.due_date.strftime("%d %B %Y") %></p>
    <button aria-label="Edit Task" data-bs-toggle="modal" data-bs-target="#editTask">
      <i class="fa-solid fa-pen fa-xs ml-2" data-action="click->edit-task#displayForm"></i>
    </button>
    <%= link_to "Delete", event_tasks_path(task), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}%>
  </div>

  <div class="modal fade" id="editTask" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editTaskLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editTaskLabel">Edit task</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <%= simple_form_for [@event, task],
          html: {
            class: 'd-none',
            data: {
              edit_task_target: 'form',
              # action: 'submit->edit-task#update'
            },
            method: :patch
          } do |f|
          %>
            <%= f.input :name %>
            <%= f.input :description %>
            <%= f.input :due_date, as: :string, input_html: { data: { controller: "flatpickr" } } %>
            <%= f.submit "Update task", class:"btn-action" %>
        <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
