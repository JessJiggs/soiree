<div class="container-standard">
  <h1 class="page-title">My dashboard</h1>
  <div class="event-dashboard">

    <div class="dashboard-card">
      <h2>events</h2>
      <div style="width: 100%">
        <%= form_with method: :get, class: "search" do %>
          <%= text_field_tag :query,
            params[:query],
            class: "search-bar",
            placeholder: "Search..."
          %>
        <% end %>
      </div>
      <% @events.each do |event| %>
        <%= link_to event_path(event), style: "width: 100%" do %>
          <div class="event-card">
            <div class="event-card-image">
              <% if event.photo.attached?  %>
                <%= cl_image_tag event.photo.key, height: 125, width: 145, crop: :fill %>
              <% end %>
            </div>
            <div class="event-card-content">
              <h5> <%= event.name %></h5>
              <p><%= event.start_date.strftime("%d %B %Y") %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="dashboard-card">
          <h2>tasks</h2>
          <% if @grouped_tasks.empty? %>
            <div class="todo-card">
            <p> You have no tasks!!! </p>
            </div>
          <% else %>
            <% @grouped_tasks.each do |day, tasks| %>
            <div class="todo-card">
              <h5 class="mb-3"><%=day%></h5>
              <ul>
                <% tasks.each do |task|%>
                  <li><%= task.name.capitalize%> - <em><%=(task.event.name)%></em></li>
                <% end %>
              </ul>
            </div>
            <% end %>
          <% end %>
    </div>
  <div class="">
      <div class="dashboard-card">
        <h2>calendar</h2>
        <div class="todo-card">
x
          <%= month_calendar(attribute: :start_date, events: @events) do |date, events| %>
                <% events.each do |event| %>
                <div>
                  <%= event.name %>
                </div>
              <% end %>
          <% end %>
        <div class="dashboard-card" style="height:300px">
          <h2>notes</h2>
          <div class="todo-card">
            <h5>Monday</h5>
          </div>
        </div>
      </div>
  </div>
</div>
